@{
    ViewData["Title"] = "Super Admin";
}
<!-- Page Breadcrumb -->
<div class="page-breadcrumbs">
    <ul class="breadcrumb">
        <li>
            <i class="fa fa-home themeprimary"></i>
            @if (ViewBag.RoleID == 1)
            {
                <a href="/SuperAdmin/Index">Dashboard</a>
            }
            else if (ViewBag.RoleID == 2)
            {
                <a href="/ClientAdmin/Index">Dashboard</a>
            }
            else if (ViewBag.RoleID == 3)
            {
                <a href="/Manager/Index">Dashboard</a>
            }
            else
            {
                <a href="/Employee/I9categories">Dashboard</a>
            }
        </li>

        <li class="active">Shared With Me</li>
    </ul>
</div>
<!-- /Page Breadcrumb -->
<!-- Page Header -->
<div class="page-header position-relative">
    <div class="header-title">
        <h1 class="themeprimary">
            Shared With Me
        </h1>
    </div>
    <!--Header Buttons-->
    <div class="header-buttons">
        <a class="sidebar-toggler" href="#">
            <i class="fa fa-arrows-h"></i>
        </a>
        <a class="refresh" id="refresh-toggler" href="">
            <i class="glyphicon glyphicon-refresh"></i>
        </a>
        <a class="fullscreen" id="fullscreen-toggler" href="#">
            <i class="glyphicon glyphicon-fullscreen"></i>
        </a>
    </div>
    <!--Header Buttons End-->
</div>
<!-- /Page Header -->
<!-- Page Body -->
<div class="page-body">
    @*<div class="col-lg-12 col-sm-12 col-xs-12 manage-division" id="divHomePrevious" style="padding:0px;">
        <input type="hidden" id="hdnParentId" />
        <div class="col-md-12">
            <div style="margin-top:12px;margin-bottom:12px; overflow:hidden;">
                <a class="btn btn-sm btn-default" id="homeroot" onclick="GoToHome(0)" style="float:left;width:33px;margin-right: 3px;margin-left:5px"><i class="fa fa-home"></i></a>
                <a class="btn btn-sm btn-default " id="backtoParent" onclick="backParent($('#hdnParentId').val())" style="float:left;width:33px"><i class="fa fa-arrow-left"></i></a>
                <div id="navigationmenu"> </div>
                <div class="btn-group pull-right">
                    <ul class="dropdown-menu">
                        <li><a id="addNewFolder" onclick="ToggleDocumentAddFolder(true)"><i class="fa fa-folder"></i> Folder</a></li>
                        <li><a onclick="ToggleDocumentAddnewfile(true)" id="addNewFile"><i class="fa fa-file"></i> File</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>*@
    <div class="col-lg-12 col-sm-12 col-xs-12 manage-division" style="padding:0px;">

        <div class="well">
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover dataTable no-footer simpledatatable" id="tblDocuments">
                    <thead>
                        <tr role='row'>
                            <th style='text-align:left'>ID&nbsp;&nbsp;&nbsp;</th>
                            <th style='text-align:left'>Document Name&nbsp;</th>
                            <th style='text-align:left'>Type&nbsp;</th>
                            <th style='text-align:left'>Shared By</th>
                            <th style='text-align:left'>Shared&nbsp;On&nbsp;</th>
                            <th style='width:144px;text-align:left'>Can&nbsp;Edit?</th>
                            <th style='width:144px;text-align:left'>Valid&nbsp;From</th>
                            <th style='width:144px;text-align:left'>Valid&nbsp;Upto</th>
                            <th style='width:144px;text-align:left'>Actions</th>
                        </tr>
                    </thead>
                    <tbody><tr>
    <td>81</td>
    <td style="text-align:left"><i class="fa fa-folder-open folder-color"></i> I9 Forms</td>
    <td style="text-align:left">General</td>
    <td style="text-align:left"> superadmin@betabulls.com</td>
    <td style="text-align:left"></td>
    <td>No</td>
    <td></td>
    <td></td>
    <td valign="middle" style="width:144px;">
                        <span data-toggle="modal" data-target=".EditFolder"><a href="javascript:void(0);" class="" data-toggle="tooltip" data-tooltip="tooltip"  data-placement="top" data-original-title="Edit"><i class="fa fa-pencil-square-o editpopover"></i></a></span></td>
</tr>
                        <tr>
                            <td>117</td>
                            <td style="text-align:left"><i class="fa fa-file-text-o file-color"></i> Affirmative</td>
                            <td style="text-align:left">PDF</td>
                            <td style="text-align:left"> client@betabulls.com</td>
                            <td style="text-align:left"></td>
                            <td>No</td>
                            <td></td>
                            <td></td>
                            <td valign="left" style="width:144px;text-align:left">
                                <span data-toggle="modal" data-target=".ViewFolder"> <a href="javascript:void(0);" class="editClick" data-toggle="tooltip" data-tooltip="tooltip"  data-placement="top" data-original-title="View" aria-describedby="tooltip798880"><i class="fa fa-file-text-o commentpopover"></i></a></span><a href="javascript:void(0);" class="editClick" data-toggle="tooltip" data-placement="top" data-original-title="Download"><i class="fa fa-download custom-o onboardpopover"></i></a>
</td>
                        </tr></tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<!-- /Page Body -->
<!--Edit Modal-->
<div class="modal fade EditFolder" id="EditFolder" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title text-center" id="myLargeModalLabel"><strong>Edit Folder/Document</strong></h4>
                <input type="hidden" id="hdnDocumentId" />
            </div>
            <div class="modal-body">
                <form class="form-horizontal col-lg-12 col-sm-12 col-xs-12" role="form">
                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-2 col-xs-12 col-md-offset-3 col-lg-offset-3 control-label no-padding-right">Title :</label>
                        <div class="col-sm-4">
                            <input type="text" class="form-select form-control" id="txtFolderName" style="margin-bottom:8px;" placeholder="Folder/File Name">
                            <span id="MsgEditTitle" class="asterisk" style="margin:0px;" hidden>Please enter title.</span>
                        </div>
                    </div>
                    <div class="form-group" id="divEditFileType" hidden>
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-2 col-xs-12 col-md-offset-3 col-lg-offset-3 control-label employee-inputcol">Document Type :</label>
                        <div class="col-sm-4">
                            <select class="form-select form-control" id="categoryTypeEdit" style="margin-bottom:8px;">
                                <option value="General">General</option>
                                <option value="Policy">Policy</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-2 col-xs-12 col-md-offset-3 col-lg-offset-3 control-label employee-inputcol">Description :</label>
                        <div class="col-sm-4">
                            <textarea class="form-control" id="txtDesEdit"></textarea>
                            <span id="MsgEditDesc" class="asterisk" style="margin:0px;" hidden>Description should be less than 500 characters.</span>
                        </div>
                    </div>

                    <div class="form-group" id="divValidityEdit">
                        <label for="inputEmail3" class="col-sm-6 col-md-2 col-lg-2 col-xs-12 col-md-offset-3 col-lg-offset-3 control-label employee-inputcol">Validity :</label>
                        <div class="col-sm-6">
                            <div class="checkbox" id="validity-dateEdit" style="margin-bottom:15px;">
                                <label style="float:left;">
                                    <input type="checkbox" class="inverted" value="validitycheck" name="chkvaliditycheckEdit">
                                    <span class="text"></span>
                                </label>
                            </div>
                            <div class="validitycheck" hidden>
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-6 col-md-3 col-lg-3 control-label no-padding-right" style="padding-left:0px;">Valid From :</label>
                                    <div class="col-sm-6">
                                        <div class="input-group">
                                            <input class="form-control date-picker" id="id-date-picker-1-txtValidFromEdit" type="text" style="cursor:default" readonly data-date-format="mm-dd-yyyy">
                                            <span class="input-group-addon">
                                                <i class="fa fa-calendar themeprimary"></i>
                                            </span>
                                        </div>
                                        <span id="MsgEditValidFrom" class="asterisk" style="margin:0px;" hidden>Valid from date is required.</span>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="inputEmail3" class="col-sm-6 col-md-3 col-lg-3 control-label no-padding-right" style="padding-left:0px;">Valid Upto :</label>
                                    <div class="col-sm-6">
                                        <div class="input-group">
                                            <input class="form-control date-picker" id="id-date-picker-1-txtValidUptoEdit" type="text" style="cursor:default" readonly data-date-format="mm-dd-yyyy">
                                            <span class="input-group-addon">
                                                <i class="fa fa-calendar themeprimary"></i>
                                            </span>
                                        </div>
                                        <span id="MsgEditValidUpto" class="asterisk" style="margin:0px;" hidden>Valid upto date is required.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
                <hr class="location-hr" />
                <div class="col-md-6 col-md-offset-5 col-lg-offset-5 col-lg-6 col-sm-5 col-sm-offseView Folder/Documentt-4 col-xs-10 col-xs-offset-2 form-btns">
                    <a href="/Document/ShareWithMe" class="cancel-btn"><button type="button" class="btn btn-md btn-primary"  id="btnSave">Save</button></a>
                    <a href="/Document/ShareWithMe" class="cancel-btn"><button type="button" class="btn btn-md btn-warning" data-dismiss="modal" id="btnCancel">Cancel</button></a>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!--/Edit Modal-->
<!--View Modal-->
<div class="modal fade ViewFolder" id="ViewFolder" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                <h4 class="modal-title text-center col-md-10" style="padding-left:53px" id="myLargeModalLabel"><strong>View Folder/Document</strong></h4>
                <input type="hidden" id="hdnDocumentId" />
            </div>
            <div class="modal-body">
                <form class="form-horizontal col-lg-10 col-lg-offset-2 col-sm-12 col-xs-12" role="form">
                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-3 col-xs-6 col-md-offset-3 col-lg-offset-2 control-label employee-inputcol">Title <span class="algn-col">:</span></label>

                        <div class="col-sm-4">
                            <label id="lblFolderName" style="float:left;" class="control-label">sdede</label>
                        </div>
                    </div>
                    <div class="form-group" id="divShareToDesc" hidden>
                        <label class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-3 col-xs-6 col-md-offset-3 col-lg-offset-2 control-label employee-inputcol">Share Description<span class="algn-col">:</span></label>
                        <div class="col-sm-4">
                            <label style="float:left;" class="control-label" id="lblShareDes"></label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-3 col-xs-6 col-md-offset-3 col-lg-offset-2 control-label employee-inputcol">Description <span class="algn-col">:</span></label>
                        <div class="col-sm-4">
                            <label style="float:left;" class="control-label" id="lblDesEdit">this is client admin</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-3 col-xs-6 col-md-offset-3 col-lg-offset-2 control-label employee-inputcol">Created Date <span class="algn-col">:</span></label>
                        <div class="col-sm-6 col-xs-6">
                            <label style="float:left;" class="control-label" id="lblCreatedDate1">08/07/2017
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-3 col-xs-6 col-md-offset-3 col-lg-offset-2 control-label employee-inputcol">Created By <span class="algn-col">:</span></label>
                        <div class="col-sm-6 col-xs-6">
                            <label style="float:left;" class="control-label" id="lblCreatedBy1">ClientAdmin
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-3 col-xs-6 col-md-offset-3 col-lg-offset-2 control-label employee-inputcol">Modified Date <span class="algn-col">:</span></label>
                        <div class="col-sm-6 col-xs-6">

                            <label style="float:left;" class="control-label" id="lblModifiedDate1">08/08/2017
                            </label>

                        </div>
                    </div>
                    <div class="form-group">
                        <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-3 col-xs-6 col-md-offset-3 col-lg-offset-2 control-label employee-inputcol">Modified By <span class="algn-col">:</span></label>
                        <div class="col-sm-6 col-xs-6">

                            <label style="float:left;" class="control-label" id="lblModifieBy1">SuperAdmin
                            </label>

                        </div>
                    </div>
                    <div id="ValidityView" hidden style="margin-left: -80px;">
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-2 col-xs-6 col-md-offset-3 col-lg-offset-3 control-label employee-inputcol">Validity From <span class="algn-col" style="margin-right: -46px;">:</span></label>
                            <div class="col-sm-6 col-xs-6">

                                <label style="float:left;margin-left:47px;" class="control-label" id="id-date-picker-1-txtValidFromView">
                                </label>

                            </div>
                        </div>
                        <div class="form-group">
                            <label for="inputEmail3" class="col-sm-5 col-md-2 col-sm-offset-1 col-lg-2 col-xs-6 col-md-offset-3 col-lg-offset-3 control-label employee-inputcol">Validity Upto <span class="algn-col" style="margin-right: -46px;">:</span></label>
                            <div class="col-sm-6 col-xs-6">

                                <label style="float:left;margin-left:47px;" class="control-label" id="id-date-picker-1-txtValidUptoView">
                                </label>

                            </div>

                        </div>
                    </div>

                </form>
                <hr class="location-hr" />
                <div class="col-md-6 col-md-offset-5 col-lg-offset-5 col-lg-6 col-sm-5 col-sm-offset-4 col-xs-10 col-xs-offset-2 form-btns">
                    <a href="#" class="cancel-btn"><button type="button" class="btn btn-md btn-warning" data-dismiss="modal" id="btnCancel">OK</button></a>
                </div>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
    <input type="hidden" id="hdnShareFrom" />
    <input type="hidden" id="hdnCanEdit" />
    <input type="hidden" id="hdnShareDate" />

</div>
<!--/View Modal-->

<environment>
    <link href="~/assets/css/upload_policy.css" rel="stylesheet" />
    <link href="~/assets/css/dataTables.bootstrap.css" rel="stylesheet" />

    <style>
        #tblDocuments > tbody > tr > td, .table > tbody > tr > th, .table > tfoot > tr > td, .table > tfoot > tr > th, .table > thead > tr > td, .table > thead > tr > th {
            text-align: left !important;
        }

        .table > tbody > tr > td, .table > tbody > tr > th, .table > tfoot > tr > td, .table > tfoot > tr > th, .table > thead > tr > td, .table > thead > tr > th {
            vertical-align: middle;
        }

        .table > thead > tr > th {
            background-color: #c1c1c1;
        }



        .form-horizontal .form-group {
            margin-bottom: 8px;
        }

        .checkbox {
            text-align: center;
        }


        .form-horizontal .control-label {
            text-align: left;
        }


        .checkbox, .radio {
            margin-top: 5px;
            margin-bottom: 5px;
        }

        .btn-primary.active.focus, .btn-primary.active:focus, .btn-primary.active:hover, .btn-primary:active.focus, .btn-primary:active:focus, .btn-primary:active:hover, .open > .dropdown-toggle.btn-primary.focus, .open > .dropdown-toggle.btn-primary:focus, .open > .dropdown-toggle.btn-primary:hover {
            border-color: transparent;
        }

        .modal-body {
            overflow: hidden;
        }

        .ajax-upload-dragdrop {
            padding-top: 0px;
        }

        .file {
            visibility: hidden;
            position: absolute;
        }

        .asterisk {
            color: #ff0000;
            margin-top: -29px;
            margin-left: 292px;
        }

        .float-left {
            width: 87%;
            margin-bottom: 8px;
            float: left;
        }

        .custom-inputgroup .input-group {
            width: 92%;
        }

        .DTTT.btn-group {
            position: absolute !important;
            display: none !important;
        }
    </style>
</environment>
<environment>
    <script src="~/assets/js/datatable/jquery.dataTables.min.js"></script>
    <script src="~/assets/js/datatable/ZeroClipboard.js"></script>
    <script src="~/assets/js/datatable/dataTables.tableTools.min.js"></script>
    <script src="~/assets/js/datatable/dataTables.bootstrap.min.js"></script>
    <script src="~/assets/js/datatable/datatables-init.js"></script>
    <script src="~/assets/js/bootbox/bootbox.js"></script>

    <script src="~/assets/js/toastr/toastr.js"></script>
    <script>
 $(function () {
  $('[data-toggle="tooltip"]').tooltip()
})
    </script>
    <script>
        
        //var oTable1 = $('#tblDocuments').dataTable({
        //    "sDom": "Tflt<'row DTTTFooter'<'col-sm-6'i><'col-sm-6'p>>",
        //    "aLengthMenu": [
        //       [5, 10, 20, 50, 100, -1],
        //       [5, 10, 20, 50, 100, "All"]
        //    ],
        //    "iDisplayLength": 10,
        //    "oTableTools": {
        //        "aButtons": [
        //            "copy", "csv", "xls", "pdf", "print"
        //        ],
        //        "sSwfPath": "http://localhost:54505/assets/swf/copy_csv_xls_pdf.swf"//"assets/swf/copy_csv_xls_pdf.swf"
        //    },
        //    "language": {
        //        "search": "",
        //        "sLengthMenu": "_MENU_",
        //        "oPaginate": {
        //            "sPrevious": "Prev",
        //            "sNext": "Next"
        //        }
        //    },
        //    "aoColumns": [null, null, null, { "bSortable": false }, null, null, null, null, { "bSortable": false }],
        //    "aaSorting": []
        //});
    </script>
    <script>
        var navBool = true;
        var navTitle = "";

        function Downloadfile(id) {
            var ClientID = $('#ddlMasterClient :selected').val();

            $.ajax({
                url: '/Document/GetDocumentsForDownload',
                type: 'GET',
                data: { documentId: id, clientID: ClientID },
                success: function (data) {
                    var data1 = JSON.parse(data)
                    if (data1.UploadDocument != null && data1.UploadDocument != "") {

                        var url = "/Document/Download?documentId=" + id + "&&clientID=" + ClientID;
                        window.location = url;
                    }
                    else {
                        Notify('There is no file to download.', 'top-right', '900', 'warning', 'fa-warning', true);
                        return false;
                    }
                }
            });
        }

        function UpdatedocumentDetails(url) {

            var returnBool = true;

            if ($("#txtFolderName").val() == undefined || $("#txtFolderName").val() == "") {
                $('#MsgEditTitle').show();
                // Notify('Please enter title name', 'top-right', '5000', 'warning', 'fa-warning', true);
                $("#txtName").focus();
                return false;
            }
            else {
                $('#MsgEditTitle').hide();
            }

            var ClientID = $('#ddlMasterClient :selected').val();

            if ($("input:checkbox[name=chkvaliditycheckEdit]").is(':checked')) {

                var dateFrom = $('#id-date-picker-1-txtValidFromEdit').val();
                var dateTo = $('#id-date-picker-1-txtValidUptoEdit').val();
                if (dateFrom == "" && dateTo == "") {
                    $('#MsgEditValidFrom').show();
                    $('#MsgEditValidUpto').show();

                    // Notify('Valid From and Valid Upto dates are required.', 'top-right', '5000', 'warning', 'fa-warning', true);

                    return false;
                }
                else {
                    $('#MsgEditValidFrom').hide();
                    $('#MsgEditValidUpto').hide();
                }
                if (dateFrom == null || dateFrom == "") {

                    $('#MsgEditValidFrom').show();

                    // Notify('Please select ValidFrom date.', 'top-right', '5000', 'warning', 'fa-warning', true);

                    return false;
                }
                else {
                    $('#MsgEditValidFrom').hide();
                }

                if (dateTo == null || dateTo == "") {

                    $('#MsgEditValidUpto').show();

                    // Notify('Please select ValidUpto date', 'top-right', '5000', 'warning', 'fa-warning', true);

                    return false;
                }
                else {
                    $('#MsgEditValidUpto').hide();
                }

                if (Date.parse(dateFrom) > Date.parse(dateTo)) {

                    $('#id-date-picker-1-txtValidUptoEdit').val('');

                    $('#MsgEditValidUpto').show();
                    $('#MsgEditValidUpto').text('Valid Upto date should not be less than Valid From date.');

                    //Notify('Valid Upto date should not be less than Valid From date.', 'top-right', '5000', 'warning', 'fa-warning', true);
                    return false;
                }
                else {
                    $('#MsgEditValidUpto').hide();
                }


            }
            var loginDetails = GetLogin();
            var email = loginDetails.split(',')[0];
            var user = loginDetails.split(',')[1];

            var getData = {

                "DocumentTitle": $('#txtFolderName').val(),
                "Description": $('#txtDesEdit').val(),
                "Category": $('#categoryTypeEdit').find(':selected').val(),
                "ModifiedBy": user,
                "Isvalid": $("input:checkbox[name=chkvaliditycheckEdit]").is(':checked') == 1 ? true : false,
                "ValidFrom": $("#id-date-picker-1-txtValidFromEdit").val(),
                "ValidUpto": $("#id-date-picker-1-txtValidUptoEdit").val(),
                "ParentId": $('#hdnParentId').val()
            }
            $.ajax({
                type: 'Put',
                url: url,
                data: { documentId: $('#hdnDocumentId').val(), document: getData, clientID: ClientID },
                success: function (data) {

                    if (JSON.parse(data) == "Document has been updated successfully.") {
                        $('.modal-backdrop').css({ position: 'initial' });
                        $('.EditFolder').hide();
                        SuccessMessage("Document '" + $('#txtFolderName').val() + "' has been updated successfully.");
                        // Notify("Document " + '"' + $('#txtFolderName').val() + '"' + " has been updated successfully", 'top-right', '5000', 'success', 'fa-check', true);

                        if ($('#hdnParentId').val() == null || $('#hdnParentId').val() == "") {
                            $("#navigationmenu").html('');
                            LoadDocuments('/Document/GetShareWithMeDetails');
                        }
                        else
                            OpenFolderDocuments($('#hdnParentId').val(), '/Document/GetFilesByParentID', "", "", $('#hdnShareFrom').val(), $('#hdnCanEdit').val(), $('#hdnShareDate').val());
                    }
                    else {

                        if (JSON.parse(data) == "The Description should be within 500 characters") {
                            $('#MsgEditDesc').show();
                            return false;
                        }
                        else {
                            $('#MsgEditDesc').hide();
                        }
                        Notify(data, 'top-right', '5000', 'warning', 'fa-warning', true);
                    }
                }
            })
        }

        function LoadDocuments(url) {

            $('#hdnShareFrom').val(''); $('#hdnCanEdit').val(''); $('#hdnShareDate').val('');
            $('#hdnParentId').val('');
            var ClientID = $('#ddlMasterClient :selected').val();

            var login = GetLogin();
            var email = login.split(',')[0];

            $.ajax({
                url: '/Document/GetShareWithMeDetails',
                data: { email: email, clientID: ClientID },
                type: 'GET',
                success: function (data) {

                    oTable1.fnClearTable();
                    var count;
                    var data1 = JSON.parse(data);

                    if (data1 != null && data1 != "Content not found") {

                        $.each(data1, function (i, item) {

                            var Folder = 'class="fa fa-folder-open folder-color"';
                            var File = 'class="fa fa-file-text-o file-color"';

                            var image = item.IsFolder == true ? Folder : File;
                            var FolderLink = '<a href="#" onclick="OpenFolder(' + item.DocumentID + ',\'' + item.DocumentTitle + '\',\'' + item.Category + '\',\'' + item.ShareFrom + '\',\'' + item.CanEdit + '\',\'' + item.ShareDate + '\')"><div style="float:left;"><i style="padding-right: 3px;" ' + Folder + '></i></div><div style="margin-left:16px"> ' + item.DocumentTitle + '</div></a>';
                            $('#hdnShareFrom').val(item.ShareFrom); $('#hdnCanEdit').val(item.CanEdit); $('#hdnShareDate').val(item.ShareDate);

                            var FileLink = "<a href='#' onclick='Downloadfile(" + item.DocumentID + ")'><div style='float:left;'><i style='padding-right: 3px;'" + image + "></i></div><div style='margin-left:16px;'> " + item.DocumentTitle + "</div></a>";
                            var image = item.IsFolder == true ? Folder : File;

                            var shreDate = new Date(item.ShareDate);
                            var sharemonth = (shreDate.getMonth() + 1);
                            if (sharemonth != '')
                                var finalsharemonth = (sharemonth < 9 ? '0' + sharemonth : sharemonth);
                            var shafredate = shreDate.getDate();
                            if (shafredate != '')
                                var finalshareDate = (shafredate < 9 ? '0' + shafredate : shafredate);
                            var shareDate = (finalsharemonth + '-' + finalshareDate + '-' + shreDate.getFullYear());

                            var vldFrom = new Date(item.ValidFrom);
                            var vldfrmmonth = (vldFrom.getMonth() + 1);
                            if (vldfrmmonth != '')
                                var finalsharemonth = (vldfrmmonth < 9 ? '0' + vldfrmmonth : vldfrmmonth);
                            var vldfrmdate = vldFrom.getDate();
                            if (vldfrmdate != '')
                                var finalshareDate = (vldfrmdate < 9 ? '0' + vldfrmdate : vldfrmdate);
                            var validFrom = (finalsharemonth + '-' + finalshareDate + '-' + vldFrom.getFullYear());
                            var vldUpto = new Date(item.ValidUpto);
                            var vldtommonth = (vldUpto.getMonth() + 1);
                            if (vldtommonth != '')
                                var finalvldmonth = (vldtommonth < 9 ? '0' + vldtommonth : vldtommonth);
                            var vldtodate = vldUpto.getDate();
                            if (vldtodate != '')
                                var finalvldtoDate = (vldtodate < 9 ? '0' + vldtodate : vldtodate);

                            var validTo = (finalvldmonth + '-' + finalvldtoDate + '-' + vldUpto.getFullYear());

                            var Edit = '';
                            var Download = '';
                            if (item.IsFolder == false) {
                                Download = "<a href='javascript:void(0);' onclick='Downloadfile(" + item.DocumentID + ")' class='' data-toggle='modal' data-placement='top' data-original-title='Download' ><i class='fa fa-download custom-o onboardpopover'></i></a>";

                            }
                            if (item.CanEdit == true)
                                Edit = "<a href='javascript:void(0);' onclick='EditDocument(" + item.DocumentID + ',' + item.IsFolder + ")' class='' data-toggle='modal' data-target='.EditFolder'  data-placement='top' data-original-title='Edit' ><i class='fa fa-pencil-square-o editpopover'></i></a>";

                            var View = "<a href='javascript:void(0);' onclick='ViewDocument(" + item.DocumentID + ',' + item.IsFolder + ")' class='' data-toggle='modal' data-target='.ViewFolder'  data-placement='top' data-original-title='View' ><i class='fa fa-file-text-o commentpopover'></i></a>";

                            var file = item.DocumentTitle;
                            var folder = item.DocumentID;
                            var flp = item.IsFolder == 1 ?FolderLink: ("<i " + image + " ></i>" + file) ;

                            var linktest = flp;
                            count = oTable1.fnAddData([item.DocumentID, linktest, (item.Category == "null" ? "" : item.Category), item.ShareFrom,
                                (item.ShareDate == null ? '' : shareDate), (item.CanEdit == true ? 'Yes' : 'No'),
                                (item.ValidFrom == null ? '' : validFrom), (item.ValidUpto == null ? '' : validTo), View + " " + Download + " " + Edit]);
                        });
                    }
                    else {
                        if ('@ViewBag.errorMessage' != null && '@ViewBag.errorMessage' != "") {
                            NotifyMessage('@ViewBag.errorMessage', 'top-right', '1800', 'warning', 'fa-warning', true);
                        }
                    }
                },
                complete: function () {
                    navBool = true;
                    $('.loader').hide();
                }
            })
        }

        function EditDocument(documentId, isFolder) {

            $('#MsgEditTitle').hide();
            $('#MsgEditDesc').hide();
            $('#MsgEditValidFrom').hide();
            $('#MsgEditValidUpto').hide();

            var ClientID = $('#ddlMasterClient :selected').val();
            $('#ShareFiles').hide();
            $('.modal-body').find('.form-group').eq(2).val('').show();
            $('.modal-body').find('.form-group').eq(5).val('').show();

            if (isFolder) {
                $('#divEditFileType').hide();
                $("#divValidityEdit").hide();
            }
            else {     
                $('#divEditFileType').show();
                $("#divValidityEdit").show();
            }

            $('.page-sidebar').css('z-index', '0');
            $('.navbar').css('z-index', '200');

            $.ajax({
                url: '/Document/GetDocumentById',
                data: { documentId: documentId, clientID: ClientID },
                datatype: 'json',
                contentType: 'application/json',
                async: false,
                processdata: true,
                success: function (data) {

                    var documentId = JSON.parse(data).DocumentID;
                    var documentTitle = JSON.parse(data).DocumentTitle;
                    var documentDesc = JSON.parse(data).Description;
                    var documentCategoryType = JSON.parse(data).Category;
                    var credate = new Date(JSON.parse(data).CreatedDate);

                    var createdMonth = (credate.getMonth() + 1);
                    var createdMonthFinal = (createdMonth < 9 ? '0' + createdMonth : createdMonth);
                    var createdDate = credate.getDate();
                    var creatededDateFinal = (createdDate < 10 ? '0' + createdDate : createdDate);
                    var credate = new Date(JSON.parse(data).CreatedDate);

                    var createdMonth = (credate.getMonth() + 1);
                    var createdMonthFinal = (createdMonth < 9 ? '0' + createdMonth : createdMonth);
                    var createdDate = credate.getDate();
                    var creatededDateFinal = (createdDate < 10 ? '0' + createdDate : createdDate);
                    var createddate = (createdMonthFinal + '-' + creatededDateFinal + '-' + credate.getFullYear());

                    var createdBy = JSON.parse(data).CreatedBy;

                    var modifydate = new Date(JSON.parse(data).ModifiedDate);


                    var ModifiedMonth = (modifydate.getMonth() + 1);
                    if (ModifiedMonth != '')
                        var ModifiedMonthFinal = (ModifiedMonth < 9 ? '0' + ModifiedMonth : ModifiedMonth);
                    var ModifiedDate = (modifydate.getDate());
                    if (ModifiedDate != '')
                        var ModifiedDateFinal = (ModifiedDate < 10 ? '0' + ModifiedDate : ModifiedDate);
                    var modifieddate = (ModifiedMonthFinal + '-' + ModifiedDateFinal + '-' + modifydate.getFullYear());

                    var modifiedDate = JSON.parse(data).ModifiedDate == null ? '' : modifieddate;     //JSON.parse(data).ModifiedDate
                    var modifiedBy = JSON.parse(data).ModifiedBy;

                    $('#hdnDocumentId').val(documentId);
                    $('#txtFolderName').val(documentTitle);
                    $('#txtDesEdit').val(documentDesc);
                    $('#lblCreatedDate').text(createddate);
                    $('#lblCreatedBy').text(createdBy);
                    $('#lblModifiedDate').text(modifiedDate);
                    $('#lblModifieBy').text(modifiedBy);

                    if (documentCategoryType != null)
                        $('#categoryTypeEdit').val(documentCategoryType);
                    else
                        $('#categoryTypeEdit').val('Select');

                    if (JSON.parse(data).ValidFrom != null && JSON.parse(data).ValidFrom != "") {

                        var ediefromdate = new Date(JSON.parse(data).ValidFrom);
                        var edieTodate = new Date(JSON.parse(data).ValidUpto);

                        $('#id-date-picker-1-txtValidFromEdit').val((ediefromdate.getMonth() + 1) + '-' + ediefromdate.getDate() + '-' + ediefromdate.getFullYear());
                        $('#id-date-picker-1-txtValidUptoEdit').val((edieTodate.getMonth() + 1) + '-' + edieTodate.getDate() + '-' + edieTodate.getFullYear());
                        $("input:checkbox[name=chkvaliditycheckEdit]").prop('checked', true).change();
                    }
                }
            })
        }

        function OpenFolderDocuments(documentID, url, documentTitle, category, shareFrom, canEdit, shareDate) {
            {

                var ClientID = $('#ddlMasterClient :selected').val();
                var login = GetLogin();
                var email = login.split(',')[0];

                $.ajax({
                    url: url,
                    type: 'GET',
                    data: { parentID: documentID, clientID: ClientID },  // Email: email,
                    success: function (data) {

                        oTable1.fnClearTable();
                        var count;
                        var data1 = JSON.parse(data);

                        if (data1 != null && data1 != "Content not found") {

                            $.each(data1, function (i, item) {

                                var Folder = 'class="fa fa-folder-open folder-color"';

                                var File = 'class="fa fa-file-text-o file-color"';

                                var image = item.IsFolder == true ? Folder : File;

                                var FolderLink = '<a href="#" onclick="OpenFolder(' + item.DocumentID + ',\'' + item.DocumentTitle + '\',\'' + category + '\',\'' + shareFrom + '\',\'' + canEdit + '\',\'' + shareDate + '\')"><div style="float:left;"><i style="padding-right: 3px;"' + Folder + '></i></div><div style="margin-left:16px"> ' + item.DocumentTitle + '</div></a>';

                                var FileLink = "<a href='#' onclick='Downloadfile(" + item.DocumentID + ")'><div style='float:left;'><i style='padding-right: 3px;' " + image + "></i></div><div style='margin-left:16px;'> " + item.DocumentTitle + "</div></a>";

                                var image = item.IsFolder == true ? Folder : File;

                                var shreDate = new Date(shareDate);
                                var sharemonth = (shreDate.getMonth() + 1);

                                if (sharemonth != '')
                                    var finalsharemonth = (sharemonth < 9 ? '0' + sharemonth : sharemonth);

                                var shafredate = shreDate.getDate();

                                if (shafredate != '')
                                    var finalshareDate = (shafredate < 9 ? '0' + shafredate : shafredate);

                                var sharedon = (finalsharemonth + '-' + finalshareDate + '-' + shreDate.getFullYear());

                                var vldFrom = new Date(item.ValidFrom);
                                var vldfrmmonth = (vldFrom.getMonth() + 1);

                                if (vldfrmmonth != '')
                                    var finalsharemonth = (vldfrmmonth < 9 ? '0' + vldfrmmonth : vldfrmmonth);

                                var vldfrmdate = vldFrom.getDate();

                                if (vldfrmdate != '')
                                    var finalshareDate = (vldfrmdate < 9 ? '0' + vldfrmdate : vldfrmdate);

                                var validityFrom = (finalsharemonth + '-' + finalshareDate + '-' + vldFrom.getFullYear());

                                var vldUpto = new Date(item.ValidUpto);
                                var vldtommonth = (vldUpto.getMonth() + 1);

                                if (vldtommonth != '')
                                    var finalvldmonth = (vldtommonth < 9 ? '0' + vldtommonth : vldtommonth);

                                var vldtodate = vldUpto.getDate();

                                if (vldtodate != '')
                                    var finalvldtoDate = (vldtodate < 9 ? '0' + vldtodate : vldtodate);

                                var validityTo = (finalvldmonth + '-' + finalvldtoDate + '-' + vldUpto.getFullYear());

                                var Edit = '';
                                var Download = '';

                                if (item.IsFolder == false) {
                                    Download = "<a href='javascript:void(0);' onclick='Downloadfile(" + item.DocumentID + ")' class='' data-toggle='modal' data-placement='top' data-original-title='Download' ><i class='fa fa-download custom-o onboardpopover'></i></a>";
                                }

                                if (canEdit == "true")
                                    Edit = "<a href='javascript:void(0);' onclick='EditDocument(" + item.DocumentID + ',' + item.IsFolder + ")' class='' data-toggle='modal' data-target='.EditFolder'  data-placement='top' data-original-title='Edit' ><i class='fa fa-pencil-square-o editpopover'></i></a>";

                                var View = "<a href='javascript:void(0);' onclick='ViewDocument(" + item.DocumentID + ',' + item.IsFolder + ")' class='' data-toggle='modal' data-target='.ViewFolder'  data-placement='top' data-original-title='View' ><i class='fa fa-file-text-o commentpopover'></i></a>";

                                var file = item.DocumentTitle;
                                var folder = item.DocumentID;
                                var flp = item.IsFolder == 1 ?FolderLink: ("<i " + image + " ></i>" + file) ;

                                var linktest = flp;

                                if (item.Category == "undefined" || item.Category == null || item.Category == "" || item.Category == "null")
                                    category = "";
                                else
                                    category = item.Category;
                                //if (category == "undefined" || category == null || category == "" || category == "null")
                                //    category = "";
                                //else
                                //    category;

                                count = oTable1.fnAddData([(item.DocumentID), linktest, category, shareFrom,
                                   shareDate == null ? "" : sharedon, (canEdit == 'true' ? 'Yes' : 'No'),
                                    (item.ValidFrom == null ? "" : validityFrom), (item.ValidUpto == null ? "" : validityTo), (View + " " + Download + " " + Edit)]); //(data[i].ValidFrom == "undefined" ? "" : validityFrom), (data[i].ValidUpto == "undefined" ? "" : validityTo)

                            });
                        }
                        else {
                            if ('@ViewBag.errorMessage' != null && '@ViewBag.errorMessage' != "") {
                                NotifyMessage('@ViewBag.errorMessage', 'top-right', '1800', 'warning', 'fa-warning', true);
                            }
                        }
                    },
                    complete: function () {
                        $('[data-toggle="modal"]').tooltip();
                        navBool = true;
                    }
                })
            }
        }

        var docID = new Array();
        var i = 0;
        var nav = '';

        function OpenFolder(documentID, documentTitle, category, shareFrom, canEdit, shareDate) {

            if (navBool == false)
                return false;
            if (navBool == true)
                navBool = false;

            docID.push(documentID);
            $("#hdnParentId").val(documentID);
            $("#ShareFiles").hide();

            OpenFolderDocuments(documentID, '/Document/GetFilesByParentID', documentTitle, category, shareFrom, canEdit, shareDate);

            navTitle += documentTitle + " / ";
            var Folder = 'class="fa fa-folder-open folder-color"';

            $("#navigationmenu").append('<a href=# style="vertical-align:-webkit-baseline-middle; margin:0px 0px 0px 5px;" onclick=Navigate(' + (i++) + ',' + documentID + ') ><i ' + Folder + ' ></i>' + documentTitle + ' /</a>').show(); //+ '<span style="vertical-align:-webkit-baseline-middle;">/</span>'
            $("#OpenFolder").toggle();
        }

        function Navigate(count, documentID) {

            if (navBool == false)
                return false;
            if (navBool == true)
                navBool = false;

            $("#navigationmenu").empty();
            nav = '';
            var title = navTitle.split('/');

            for (var s = 0; s <= count; s++) {  //  {  for (var s = 0; s <= docID.length-1; s++)
                nav += title[s] + '/';
                var Folder = 'class="fa fa-folder-open folder-color"';
                $("#navigationmenu").append('<a href=# style="vertical-align:-webkit-baseline-middle;  margin:0px 0px 0px 5px;" onclick=Navigate(' + s + ',' + docID[s] + ') ><i ' + Folder + ' ></i>' + title[s] + '/</a>').show()
            }

            navTitle = nav;
            i = count + 1;

            for (var f = i; f < docID.length; f++)
                docID.splice(f, docID.length);

            OpenFolderDocuments(documentID, '/Document/GetFilesByParentID', "", "", $('#hdnShareFrom').val(), $('#hdnCanEdit').val(), $('#hdnShareDate').val());
            $("#hdnParentId").val(documentID);
        }

        function ViewDocument(documentId, isFolder) {

            var ClientID = $('#ddlMasterClient :selected').val();
            $('#ShareFiles').hide();
            $('.modal-body').find('.form-group').eq(2).val('').show();
            $('.modal-body').find('.form-group').eq(5).val('').show();

            if (isFolder) {
                $('#divEditFileType').hide();
                $("#divValidityEdit").hide();
                $('#ValidityView').hide();
            }
            else {

                $('#divEditFileType').show();
                $("#divValidityEdit").show();
                $('#ValidityView').show();
            }
            $('.page-sidebar').css('z-index', '0');
            $('.navbar').css('z-index', '200');

            $.ajax({
                url: '/Document/GetDocumentById',
                data: { documentId: documentId, clientID: ClientID },
                datatype: 'json',
                contentType: 'application/json',
                async: false,
                processdata: true,
                success: function (data) {

                    var documentId = JSON.parse(data).DocumentID;
                    var documentTitle = JSON.parse(data).DocumentTitle;
                    var documentDesc = JSON.parse(data).Description;
                    var documentCategoryType = JSON.parse(data).Category;
                    var credate = new Date(JSON.parse(data).CreatedDate);

                    var createdMonth = (credate.getMonth() + 1);
                    var createdMonthFinal = (createdMonth < 9 ? '0' + createdMonth : createdMonth);
                    var createdDate = credate.getDate();
                    var creatededDateFinal = (createdDate < 10 ? '0' + createdDate : createdDate);
                    var createddate = (createdMonthFinal + '-' + creatededDateFinal + '-' + credate.getFullYear());
                    var createdBy = JSON.parse(data).CreatedBy;

                    var modifydate = new Date(JSON.parse(data).ModifiedDate);
                    var ModifiedMonth = (modifydate.getMonth() + 1);

                    if (ModifiedMonth != '')
                        var ModifiedMonthFinal = (ModifiedMonth < 9 ? '0' + ModifiedMonth : ModifiedMonth);

                    var ModifiedDate = (modifydate.getDate());

                    if (ModifiedDate != '')
                        var ModifiedDateFinal = (ModifiedDate < 10 ? '0' + ModifiedDate : ModifiedDate);

                    var modifieddate = (ModifiedMonthFinal + '-' + ModifiedDateFinal + '-' + modifydate.getFullYear());

                    var modifiedDate = JSON.parse(data).ModifiedDate == null ? '' : modifieddate;     //JSON.parse(data).ModifiedDate
                    var modifiedBy = JSON.parse(data).ModifiedBy;


                    $('#hdnDocumentId').val(documentId);
                    $('#lblFolderName').text(documentTitle);
                    $('#lblDesEdit').text(documentDesc);
                    $('#lblCreatedDate1').text(createddate);
                    $('#lblCreatedBy1').text(createdBy);
                    $('#lblModifiedDate1').text(modifiedDate);
                    $('#lblModifieBy1').text(modifiedBy);

                    if (documentCategoryType != null)
                        $('#categoryTypeEdit').val(documentCategoryType);
                    else
                        $('#categoryTypeEdit').val('Select');

                    if (JSON.parse(data).ValidFrom != null && JSON.parse(data).ValidFrom != "") {

                        var ediefromdate = new Date(JSON.parse(data).ValidFrom);
                        var edieTodate = new Date(JSON.parse(data).ValidUpto);
                        var edieFromMonth = (ediefromdate.getMonth() + 1);

                        if (edieFromMonth != '')
                            var edieFromMonthFinal = (edieFromMonth < 9 ? '0' + edieFromMonth : edieFromMonth);

                        var edieFromDate = (ediefromdate.getDate());

                        if (edieFromDate != '')
                            var edieFromDateFinal = (edieFromDate < 10 ? '0' + edieFromDate : edieFromDate);

                        var EditedFromDate = (edieFromMonthFinal + '-' + edieFromDateFinal + '-' + ediefromdate.getFullYear());

                        var edieToMonth = (edieTodate.getMonth() + 1);

                        if (edieToMonth != '')
                            var edieToMonthFinal = (edieToMonth < 9 ? '0' + edieToMonth : edieToMonth);

                        var edieToDate = (edieTodate.getDate());

                        if (edieToDate != '')
                            var edieToDateFinal = (edieToDate < 10 ? '0' + edieToDate : edieToDate);

                        var EditedToDate = (edieToMonthFinal + '-' + edieToDateFinal + '-' + edieTodate.getFullYear());

                        $('#id-date-picker-1-txtValidFromView').text(EditedFromDate);
                        $('#id-date-picker-1-txtValidUptoView').text(EditedToDate);

                    }
                    else {
                        $('#id-date-picker-1-txtValidFromView').text('');
                        $('#id-date-picker-1-txtValidUptoView').text('');
                    }
                }
            })
        }

        $(document).ready(function () {
            $('#EditFolder #txtFolderName').keypress(function (event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '47') {
                    return false;
                }
            });

            $('#txtFolderName').on('keypress', function (event) {
                var keycode = (event.keyCode ? event.keyCode : event.which);
                if (keycode == '44') {
                    return false;
                }
            });

            LoadDocuments('/Document/GetShareWithMeDetails');
            $("#navigationmenu").html('');

            $(".validitycheck").hide();

            $('input[type="checkbox"]').click(function () {
                if ($(this).attr("value") == "validitycheck") {
                    $(".validitycheck").toggle();
                }
            });
        });

    </script>

    <script>
        //--Bootstrap Date Picker--
        $('.date-picker').datepicker();
        $('.date-picker').on('changeDate', function (ev) {
            $(this).datepicker('hide');
        });

    </script>
    <script type="text/javascript">
        $(document).ready(function () {

            //$('.page-sidebar').css('z-index', '0');
            //$('.navbar').css('z-index', '200');

            $('#optFile').change(function () {

                if ($('#optFile').val() == 1) {
                    $('.modal-body').find('.form-group').eq(2).show();
                    $('.modal-body').find('.form-group').eq(5).show();
                    $("#divValidity").show();
                }
                else {
                    $('.modal-body').find('.form-group').eq(2).hide();
                    $('.modal-body').find('.form-group').eq(5).hide();
                    $("#divValidity").hide();
                }
            });

            $('#btnCancelShare').click(function () {
                $("#txtShareTo").val('');
                $("#txtShareDesc").val('');
            });

            $('#btnCancelAdd').click(function () {
                $('.modal-body input').val('');
                $('#txtDescription').val('');
                $("input[name='chkvaliditycheck']").prop('checked', false).change();
                $("#divValidity").hide();
                $('#optFile option[value=0]').prop("selected", true).change();
            });

            $("input[name='chkvaliditycheckEdit']").change(function () {
                $(".validitycheck").hide();
                var chk = $(this).is(':checked');

                if (chk) {
                    $(".validitycheck").show();
                }
                else//if (chk==false)
                {
                    $('#id-date-picker-1-txtValidFromEdit').val('')
                    $('#id-date-picker-1-txtValidUptoEdit').val('')
                }
            });


            $("input[name='chkvaliditycheck']").change(function () {
                $(".validitycheck").hide();
                var chk = $(this).is(':checked');
                if (chk) {
                    $(".validitycheck").show();
                }
                else//if (chk==false)
                {
                    $('#id-date-picker-1-txtValidFrom').val('')
                    $('#id-date-picker-1-txtValidUpto').val('')
                }
            });

            $("[data-toggle=tooltip]").tooltip();
            $(".upload").hide();

            $('input[type="radio"]').click(function () {

                if ($(this).attr("value") == "createnew") {
                    $(".box").not(".createnew").hide();
                    $(".createnew").show();
                }

                if ($(this).attr("value") == "upload") {
                    $(".box").not(".upload").hide();
                    $(".upload").show();
                }
            });
            $('#btnAddFileorFolder').click(function () {

                $('#txtName,.form-control#txtDescription,#id-date-picker-1-txtValidFrom,#id-date-picker-1-txtValidUpto,#txtUploadPath').val('');
                $('input:checkbox[name=chkvaliditycheck]').attr('checked', false);
                $('#optFile option[value=0]').prop("selected", true).change();

                $(".validitycheck").hide();
                $('.page-sidebar').css('z-index', '0');
                $('.navbar').css('z-index', '200');
            });

            $('.editpopover').click(function () {
                $('.page-sidebar').css('z-index', '0');
                $('.navbar').css('z-index', '200');
            });

            $('.deletepopover').click(function () {
                $('.page-sidebar').css('z-index', '0');
                $('.navbar').css('z-index', '200');
            });
        });

        function ClearAdd() {

            $('.modal-body input').val('');
            $('#txtDescription').val('');
            $("input[name='chkvaliditycheck']").prop('checked', false).change();
            $("#divValidity").hide();
            $('#optFile option[value=0]').prop("selected", true).change();

        }

        function ClearShare(documentId) {

            $('#hdnDocumentId').val(documentId)
            $("#txtShareTo").val('');
            $("#txtShareDesc").val('');

            $('#chkType').attr('checked', false);
        }

        function backParent(parentID) {
             
            if (navBool == false)
                return false;
            if (navBool == true)
                navBool = false;

            $("#navigationmenu").html('');
            i = 0;

            var navT = navTitle.split('/');
            var newText = "";

            for (var p = 0 ; p <= navT.length - 3 ; p++) {
                //newText +=   navT[i] + "&nbsp;/&nbsp;";
                newText += navT[p] + "/";
                var Folder = 'class="fa fa-folder-open folder-color"';
                $("#navigationmenu").append('<a href=# style="vertical-align:-webkit-baseline-middle; margin:0px 0px 0px 5px;" onclick=Navigate(' + p + ',' + docID[p] + ') ><i ' + Folder + ' ></i>' + navT[p] + '/</a>').show()
              
            }
            i = p;

            for (var g=i; g < docID.length; g++)
                docID.splice(g, docID.length);

            navTitle = newText;
            if (i == 0)
                GoToHome(0)
            else
            GetParentIDByDocumentID(parentID);
        }

        function GetConnectionString() {
            var ClientID = $('#ddlMasterClient :selected').val();

            $.ajax({
                url: '/Manager/GetConnectionString',
                type: 'GET',
                async: false,
                data: { clientID: ClientID },
                success: function (data) {
                    connString = data;
                }
            })
        }

        function GetParentIDByDocumentID(documentID) {

            var ClientID = $('#ddlMasterClient :selected').val();
            GetConnectionString();
            var ConnectionString = connString == undefined ? null : connString;

            $.ajax({
                url: '/Document/GetParentIDByDocumentID',
                data: { DocumentID: documentID },
                type: 'Get',
                success: function (data) {

                    var data1 = JSON.parse(data);
                    if (data1.ParentId != null) {
                        //if (data1.ParentId == 0) {

                        //    LoadDocuments('/Document/GetShareWithMeDetails');
                        //}
                        //else {

                            OpenFolderDocuments(data1.ParentId, '/Document/GetFilesByParentID', data1.DocumentTitle, data1.Category, $('#hdnShareFrom').val(), $('#hdnCanEdit').val(), $('#hdnShareDate').val());
                        //}

                        $("#hdnParentId").val(data1.ParentId);

                    }
                }
            })
        }

        function GoToHome(parentID) {
            docID = [];
            navTitle = '';
            nav = '';
            i = 0;
            $("#navigationmenu").html('').show();
            navTitle = "";
            $('#hdnParentId').val('');

            LoadDocuments('/Document/GetShareWithMeDetails');
        }

    </script>
</environment>